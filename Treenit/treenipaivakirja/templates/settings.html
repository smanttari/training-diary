{% extends "base_generic.html" %}
{% block title %}Treenipäiväkirja | Asetukset{% endblock %}
{% block header %}ASETUKSET{% endblock %}

{% load widget_tweaks %}


{% block content %}

{% for message in messages %}
<div class="alert alert-{% if message.tags == 'success' %}success{% elif message.tags == 'error' %}danger{% else %}info{%endif%} alert-dismissible fade show" role="alert">
    <strong class="text-uppercase mr-1">{{ message.tags }}</strong>{{ message|safe }}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
        </button>
</div>
{% endfor %}

  <div class="btn-group btn-group-sm" role="group" aria-label="">
    <button id="btn_profile" name="nav_btn" type="button" class="btn btn-primary pr-3 pl-3" onclick="showDiv('profile')">PROFIILI</button>
    <button id="btn_sports" name="nav_btn" type="button" class="btn btn-primary pr-3 pl-3" onclick="showDiv('sports')">LAJIT</button>
    <button id="btn_zones" name="nav_btn" type="button" class="btn btn-primary pr-3 pl-3" onclick="showDiv('zones')">TEHOALUEET</button>
    <button id="btn_pw_reset" name="nav_btn" type="button" class="btn btn-primary pr-3 pl-3" onclick="showDiv('pw_reset')">VAIHDA SALASANA</button>
  </div>

<div class="mt-4" name="page" id="profile" style="display: block">

  <div class="border p-4 bg-light">

    <h5 class="mb-4">PROFIILI</h5>

    <form method="post">{% csrf_token %}
      <fieldset>
        <div class="form-group row">
          <label class="col-md-2 col-form-label"><b>{{ user_form.first_name.label }}</b></label>
          <div class="col-md-2">{{ user_form.first_name|add_class:'form-control' }}</div>
        </div>
        <div class="form-group row">
          <label class="col-md-2 col-form-label"><b>{{ user_form.last_name.label }}</b></label>
          <div class="col-md-2">{{ user_form.last_name|add_class:'form-control' }}</div>
        </div>
        <div class="form-group row">
          <label class="col-md-2 col-form-label"><b>{{ user_form.email.label }}</b></label>
          <div class="col-md-2">{{ user_form.email|add_class:'form-control' }}</div>
        </div>
      </fieldset>
      <div class="form-actions col-md-6 mt-3">
        <button type="submit" class="btn btn-success mr-3" name="profile_save" id="profile_save">Tallenna</button>
      </div>
    </form>

  </div>

</div>

<div class="mt-4" name="page" id="sports">

  <div class="border p-4 bg-light">
  <h5 class="mb-4">LAJIT</h5>

  <div class="col-lg-6">
    <table class="table table-sm mb-4">
      <thead class="thead-light">
        <tr>
          {% for header in sports_headers %}
          <th>{{ header }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for id,row in sports_values.items %}
        <tr class="table-light">
          {% for column,value in row.items %}
          {% if column == 'edit' %}
          <td><a href="{% url 'sport_modify' value  %}"><i class="far fa-edit"></i></a></td>
          {% elif column == 'delete' %}
          <td><a href="{% url 'sport_delete' value  %}"><i class="far fa-trash-alt"></i></a></td>
          {% else %}
          <td>{{ value }}</td>
          {% endif %}
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="row">
      <a href="{% url 'sport_add' %}" class="btn btn-success mr-3 ml-4" role="button" aria-pressed="true"><i class="fas fa-plus-circle mr-2"></i>Lisää</a>  
    </div>
  </div>
</div>


<div class="mt-4" name="page" id="zones">

  <div class="border p-4 bg-light">
  <h5 class="mb-4">TEHOALUEET</h5>

  <div class="col-lg-4">
    <table class="table table-sm mb-4">
      <thead class="thead-light">
        <tr>
          {% for header in zones_headers %}
          <th>{{ header }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for id,row in zones_values.items %}
        <tr class="table-light">
          {% for column,value in row.items %}
          {% if column == 'edit' %}
          <td class="pr-2 pl-2"><a href="{% url 'zone_modify' value  %}"><i class="far fa-edit"></i></a></td>
          {% elif column == 'delete' %}
          <td class="pr-2 pl-2"><a href="{% url 'zone_delete' value  %}"><i class="far fa-trash-alt"></i></a></td>
          {% else %}
          <td>{{ value }}</td>
          {% endif %}
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="row">
    <a href="{% url 'zone_add' %}" class="btn btn-success mr-3 ml-4" role="button" aria-pressed="true"><i class="fas fa-plus-circle mr-2"></i>Lisää</a>  
  </div>
  </div>
</div>


<div class="mt-4" name="page" id="pw_reset">

  <div class="border p-4 bg-light">
      <h5 class="mb-4">VAIHDA SALASANA</h5>
  
      <form method="post">{% csrf_token %}
        <fieldset>
          {% for field in pw_form %}
          <div class="form-group row">
            <label class="col-md-2 col-form-label"><b>{{ field.label }}</b></label>
            <div class="col-md-2">{{ field|add_class:'form-control' }}</div>
            {% if field.errors %}
            <div class="col-md-4 text-danger small">{% for error in field.errors %}{{ error }} {% endfor %}</div>
            {% else %}
            <div class="col-md-4 text-muted small">{{ field.help_text }}</div>
            {% endif %}
          </div>
          {% endfor %}
        </fieldset>
        <div class="form-actions col-md-6 mt-3">
          <button type="submit" class="btn btn-success mr-3" name="pw_save" id="pw_save">Tallenna</button>
        </div>
      </form>
  
    </div>

</div>

<script>

function showDiv(id) {
  buttons = document.getElementsByName("nav_btn")
  for (var i = 0; i < buttons.length; i++) {
    buttons[i].classList.remove("active")
  }
  document.getElementById("btn_" + id).classList.add("active")

  var pages = document.getElementsByName("page")
  for (var i = 0; i < pages.length; i++) {
    if (pages[i].id == id) {
      pages[i].style.display = 'block'
    }
    else {
      pages[i].style.display = 'none'
    }
  }
}

// activate div
let button = 'btn_{{active_div}}'
document.getElementById(button).click()

</script>

{% endblock %}